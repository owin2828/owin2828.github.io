<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    [Spring] MVC1: 요청 매핑, 커맨드 객체, 리다이렉트, 폼 태그, 모델 - 낮코밤코
    
  </title>

  <meta name="description" content="0. 들어가기 앞서 본 문서에서 다루는 뷰는 크게 다음과 같다. step1: 약관 동의, 별다른 기능 없음 step2: 회원가입 정보입력, step1에 동의 해야만 접근 가능 step3: 회원가입 완료, 첫 화면으로 돌아가는 기능 제공 surveyFrom: 설문조사 항목을 표기 s...">

  <link href='http://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css' rel='stylesheet' type='text/css'>
  <!-- <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'> -->

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://owin2828.github.io/devlog/2019/12/30/spring-11.html">
  <link rel="alternate" type="application/rss+xml" title="낮코밤코" href="/feed.xml">

  <!-- 웹 폰트 설정 -->
  <!-- <link rel="stylesheet" href="http://cdn.jsdelivr.net/gh/joungkyun/font-d2coding/d2coding.css"> -->
  <link rel="stylesheet" href="/assets/syntax.css">
  
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TVK6F4S');</script>
    <!-- End Google Tag Manager -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-154694140-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-154694140-1');
</script>


</head>


<body>
  
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TVK6F4S"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
  

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">&#9750; Fake it, till U make it</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div
     class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/about">| About</a>
        <li class="nav-item">
          <a class="nav-link" href="/posts">| All Posts</a>
        </li>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href=# id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            | Devlog
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="/devlog/aws">AWS</a>
            <a class="dropdown-item" href="/devlog/cicd">CI/CD</a>
            <a class="dropdown-item" href="/devlog/java">Java</a>
            <!-- <a class="dropdown-item" href="/devlog/node">Node.js</a> -->
            <a class="dropdown-item" href="/devlog/spring">Spring</a>
            <a class="dropdown-item" href="/devlog/web">Web</a>
            <a class="dropdown-item" href="/devlog/etc">Etc</a>
          </div>
        </li>
        <!-- <li class="nav-item">
          <a class="nav-link" href="/contact">| Contact</a>
        </li> -->
        <li class="nav-item">
          <a class="nav-link" href="/search">
            <i class="fa fa-search" aria-hidden="true"></i> Search
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead" style="background-image: url('/img/background_spring.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>[Spring] MVC1: 요청 매핑, 커맨드 객체, 리다이렉트, 폼 태그, 모델</h1>
            
            <h2 class="subheading">첫걸음 - 11</h2>
            
            <span class="meta">Posted by
              <a href="#">owin2828</a>
              on 2019-12-30 16:27 &middot; <span class="reading-time" title="Estimated read time">
  
   25 mins  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container-content">
    <div class="row">
      <div id="SideNav">
    <div id="_sidebar" class="sidebar">
      <div class="sidebar-bg" style="background-color:;background-image:url()"></div>
      <header class="sidebar-sticky" role="banner">
        <br/>
        <div class="sidebar-about">
          
        </div>
        <br/>
        
      <nav class="sidebar-nav heading" role="navigation">
        <!-- 포스팅에서 sidebar로 소제목 찾아가기 -->
<span class="sr-only">Navigation:</span>
<ul>
  
</ul>
      </nav>
      </header>
    </div>
  </div>
      <div class="col-lg-8 col-md-10 mx-auto">

        <h2 id="0-들어가기-앞서">0. 들어가기 앞서</h2>
<hr />
<p>본 문서에서 다루는 뷰는 크게 다음과 같다.</p>
<ul>
  <li><code class="highlighter-rouge">step1</code>: 약관 동의, 별다른 기능 없음</li>
  <li><code class="highlighter-rouge">step2</code>: 회원가입 정보입력, step1에 동의 해야만 접근 가능</li>
  <li><code class="highlighter-rouge">step3</code>: 회원가입 완료, 첫 화면으로 돌아가는 기능 제공</li>
  <li><code class="highlighter-rouge">surveyFrom</code>: 설문조사 항목을 표기</li>
  <li><code class="highlighter-rouge">submitted</code>: 설문조사 결과를 화면에 표기 <br />
<br /></li>
</ul>

<h2 id="1-요청-매핑-어노테이션을-이용한-경로-매핑">1. 요청 매핑 어노테이션을 이용한 경로 매핑</h2>
<hr />
<p>웹 어플리케이션을 개발하는 것은 다음 코드를 작성하는 것</p>
<ol>
  <li>특정 요청 <code class="highlighter-rouge">URL을 처리</code>할 코드</li>
  <li>처리 결과를 HTML과 같은 형식으로 <code class="highlighter-rouge">응답</code>하는 코드<br />
이 중 첫 번째는 @Controller 어노테이션을 이용한 컨트롤러 클래스를 이용해 구현하며, <code class="highlighter-rouge">요청 매핑 어노테이션</code>은 다음과 같다.
    <ul>
      <li>@RequestMapping</li>
      <li>@GetMapping</li>
      <li>@PostMapping</li>
    </ul>
  </li>
</ol>

<p>이를 이용하여 간단히 화면을 띄우는 방법은 다음 예시와 같다.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// RegisterController.java</span>
    <span class="nd">@Controller</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterController</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/register/step1"</span><span class="o">)</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep1</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"register/step1"</span><span class="o">;</span>
        <span class="o">}</span>
            <span class="o">...</span>
</code></pre></div></div>
<ul>
  <li>요청 경로가 /register/step1인 경우 “register/step1”을 리턴하며 이는 곧 보여줄 <code class="highlighter-rouge">뷰의 이름</code></li>
  <li>step1.jsp 파일을 생성 후, 설정파일에 RegisterController를 Bean으로 <code class="highlighter-rouge">등록</code><br />
<br /></li>
</ul>

<h4 id="1-1-get-post의-구분-getmapping-postmapping">1-1. GET, POST의 구분: @GetMapping, @PostMapping</h4>
<ul>
  <li>스프링 MVC는 별도 설정이 없으면 GET과 POST 방식에 상관없이 <code class="highlighter-rouge">@RequestMapping</code>에 지정한 경로와 일치하는 요청을 처리</li>
  <li><code class="highlighter-rouge">POST</code> 방식의 요청만 처리하고 싶다면, <code class="highlighter-rouge">@PostMapping</code> 어노테이션을 사용해 제한</li>
  <li>마찬가지로, <code class="highlighter-rouge">GET</code> 방식은 <code class="highlighter-rouge">@GetMapping</code> 어노테이션을 사용해 제한
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// RegisterController.java</span>
  <span class="nd">@Controller</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterController</span> <span class="o">{</span>
      <span class="o">...</span>
          <span class="c1">// regist/step2 경로로 들어오는 요청중 POST 방식만 처리 </span>
      <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step2"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep2</span><span class="o">(</span>
          <span class="o">...</span>
          <span class="o">}</span>

          <span class="c1">// regist/step2 경로로 들어오는 요청중 GET 방식만 처리</span>
      <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/register/step2"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep2Get</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="s">"redirect:/register/step1"</span><span class="o">;</span>
      <span class="o">}</span>
          <span class="o">...</span>
  <span class="o">}</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h2 id="2-요청-파라미터-접근">2. 요청 파라미터 접근</h2>
<hr />
<p>step1.jsp 코드에는 다음처럼 ‘agree’ 요청 파라미터의 값을 <code class="highlighter-rouge">POST</code> 방식으로 전송하며,<br />
폼에서는 지정한 agree <code class="highlighter-rouge">요청 파라미터의 값</code>을 이용해 약관 동의 여부를 확인 가능</p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c">&lt;!-- step1.jsp --&gt;</span>
    <span class="c">&lt;!-- 약관 동의 화면을 생성하는 코드 --&gt;</span>
    ...
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"step2"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;label&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">name=</span><span class="s">"agree"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">&gt;</span> 약관 동의
    <span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"다음 단계"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
    ...
</code></pre></div></div>
<p>컨트롤 매서드에서 요청 파라미터를 사용하는 방법은 다음과 같이 2가지 방법이 존재</p>
<ol>
  <li><code class="highlighter-rouge">HttpServletRequest</code>를 직접 이용</li>
  <li><code class="highlighter-rouge">@RequestParam</code> 어노테이션을 사용<br />
<br /></li>
</ol>

<h4 id="2-1-httpservletrequest를-이용">2-1. HttpServletRequest를 이용</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// RegisterController.java </span>
    <span class="nd">@Controller</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterController</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step2"</span><span class="o">)</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep2</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nc">String</span> <span class="n">agreeParam</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"agree"</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">agreeParam</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="n">agreeParam</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"true"</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="s">"register/step1"</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="s">"register/step2"</span><span class="o">;</span>
        <span class="o">}</span>
            <span class="o">...</span>
    <span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>컨트롤러의 처리 매서드 파라미터로 <code class="highlighter-rouge">HttpServletRequest</code> 타입을 사용</li>
  <li>HttpServletRequest의 <code class="highlighter-rouge">getPatameter()</code> 매서드를 이용해 파라미터의 값을 구함<br />
<br /></li>
</ul>

<h4 id="2-2-requestparam-어노테이션을-이용">2-2. @RequestParam 어노테이션을 이용</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// RegustController.java</span>
    <span class="nd">@Controller</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterController</span> <span class="o">{</span>
        <span class="o">...</span>
        <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step2"</span><span class="o">)</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep2</span><span class="o">(</span>
                            <span class="cm">/*
                            * agree 요청 파라미터의 값을 읽어, agreeVal에 할당 
                            * 요청 파라미터의 값이 없다면, "false" 문자열을 값으로 사용 
                            */</span>
                <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"agree"</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"false"</span><span class="o">)</span> <span class="nc">Boolean</span> <span class="n">agreeVal</span><span class="o">){</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">agree</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="s">"register/step1"</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="s">"register/step2"</span><span class="o">;</span>
        <span class="o">}</span>
            <span class="o">...</span>
    <span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>요청 파라미터의 개수가 몇 개 안 되면 <code class="highlighter-rouge">@RequestParam</code> 어노테이션을 사용해 간단히 값을 구하는 것이 가능</li>
  <li>@RequestParam 어노테이션의 <code class="highlighter-rouge">속성</code>은 다음이 존재
    <ol>
      <li>value(String): HTTP 요청 파라미터의 이름을 지정</li>
      <li>required(boolean): 필수 여부 지정</li>
      <li>defaultValue(String): 값이 없을 때 사용할 문자열 지정<br />
<br /></li>
    </ol>
  </li>
</ul>

<h2 id="3-리다이렉트-처리">3. 리다이렉트 처리</h2>
<hr />
<p>step2는 step1에서 약관을 동의해야만 접근 가능한 페이지이므로, URL을 <code class="highlighter-rouge">직접</code> 입력하여 접근하는 GET 방식은 <code class="highlighter-rouge">허용하지 않음</code><br />
따라서 다음과 같이 URL을 직접 입력하는 경우, step1로 <code class="highlighter-rouge">리다이렉트</code> 시킴</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// RegisterController.java</span>
    <span class="nd">@Controller</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterController</span> <span class="o">{</span>
        <span class="o">...</span>
            <span class="c1">// regist/step2 경로로 들어오는 요청중 POST 방식만 처리 </span>
        <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step2"</span><span class="o">)</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep2</span><span class="o">(</span>
            <span class="o">...</span>
            <span class="o">}</span>

            <span class="c1">// regist/step2 경로로 들어오는 요청중 GET 방식만 처리, step1로 리다이렉트 시킴</span>
        <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/register/step2"</span><span class="o">)</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep2Get</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"redirect:/register/step1"</span><span class="o">;</span>
        <span class="o">}</span>
            <span class="o">...</span>
    <span class="o">}</span>
</code></pre></div></div>
<p>리다이렉트할 <code class="highlighter-rouge">경로</code>를 설정하는 방법은 다음과 같이 3가지가 존재</p>
<ol>
  <li><code class="highlighter-rouge">웹 어플리케이션을 기준</code>으로 이동 경로를 생성:
    <ul>
      <li>“redirect:” 뒤의 문자열이 “/”로 시작하는 경우</li>
      <li>“redirect:/register/step1”은 웹 어플리케이션 경로와 합쳐져 “/sp5-chap11/register/step1”이 됨</li>
    </ul>
  </li>
  <li>현재 경로를 기준으로 <code class="highlighter-rouge">상대 경로</code>를 이용:
    <ul>
      <li>”/”로 시작하지 않을 경우</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">절대 경로</code>를 이용:
    <ul>
      <li>완전한 URL을 사용<br />
<br /></li>
    </ul>
  </li>
</ol>

<h2 id="4-커맨드-객체">4. 커맨드 객체</h2>
<hr />

<h4 id="4-1-커맨드-객체를-이용해-요청-파라미터-사용">4-1. 커맨드 객체를 이용해 요청 파라미터 사용</h4>
<p>step2.jsp가 생성하는 폼은 다음 <code class="highlighter-rouge">파라미터</code>를 이용해 정보를 서버에 전송</p>
<ul>
  <li>email / name / password / confirmPassword<br />
이를 처리하기 위해 다음과 같은 전송 코드를 사용가능
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step3"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep3</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">){</span>
      <span class="nc">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"email"</span><span class="o">);</span>
      <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>
      <span class="nc">String</span> <span class="n">password</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"password"</span><span class="o">);</span>
      <span class="nc">String</span> <span class="n">confirmPassword</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"confirmPassword"</span><span class="o">);</span>
          <span class="o">...</span>
</code></pre></div>    </div>
    <blockquote>
      <p>하지만 파라미터의 개수가 훨씬 많아진다면 <code class="highlighter-rouge">일일히</code> 값을 읽어올 것인가?</p>
    </blockquote>
  </li>
  <li>이런 불편함을 줄이기 위해 스프링은 요청 파라미터의 값을 <code class="highlighter-rouge">커맨드 객체</code>에 담아주는 기능을 다음과 같이 제공
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step3"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep3</span><span class="o">(</span><span class="nc">RegisterRequest</span> <span class="n">regReq</span><span class="o">){</span>
      <span class="o">...</span>
  <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>다음과 같이 <code class="highlighter-rouge">요청 파라미터</code>의 값을 전달 받을 수 있는 <code class="highlighter-rouge">setter 매서드</code>를 포함하는 객체를 커맨드 객체로 사용
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// RegisterRequest.java</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterRequest</span> <span class="o">{</span>
      <span class="o">...</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPassword</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">password</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPassword</span><span class="o">(</span><span class="nc">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">this</span><span class="o">.</span><span class="na">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">;</span>
      <span class="o">}</span>
          <span class="o">...</span>
  <span class="o">}</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h4 id="4-2-뷰-jsp-코드에서-커맨드-객체-사용">4-2. 뷰 JSP 코드에서 커맨드 객체 사용</h4>
<p>가입할 때 사용한 이메일 주소와 이름을 가입 완료 화면에서 커맨드 객체를 이용해 다음과 같이 표시 가능</p>
<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ...
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;p&gt;&lt;strong&gt;</span>${registerRequest.name}님<span class="nt">&lt;/strong&gt;</span> 
            회원 가입을 완료했습니다.<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="nt">&lt;c:url </span><span class="na">value=</span><span class="s">'/main'</span><span class="nt">/&gt;</span><span class="s">"</span><span class="nt">&gt;</span>[첫 화면 이동]<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
    <span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<ul>
  <li>${registerRequest.name}에서 registerRequest가 <code class="highlighter-rouge">커맨드 객체</code>에 접근시 사용한 <code class="highlighter-rouge">속성 이름</code></li>
  <li>스프링 MVC는 다음과 같이 커맨드 객체의 클래스 이름과 <code class="highlighter-rouge">동일한</code> 속성 이름을 사용해 커맨드 객체를 뷰에 전달
    <blockquote>
      <p>JSTL <code class="highlighter-rouge">c tag</code>는 <a href="https://owin2828.github.io/devlog/2020/01/06/web-2.html">여기</a>를 참조</p>
      <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step3"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep3</span><span class="o">(</span><span class="nc">RegisterRequest</span> <span class="n">regReq</span><span class="o">){</span>
      <span class="o">...</span>
  <span class="o">}</span>
  <span class="c1">// 위와 같은 RegisterRequest 클래스 이름에서 첫 글자만 소문자로 변경해 아래와 같이 전달</span>
</code></pre></div>      </div>
    </blockquote>

    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;p&gt;&lt;strong&gt;</span>${registerRequest.name}님<span class="nt">&lt;/strong&gt;</span> 
      회원 가입을 완료했습니다.<span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h4 id="4-3-modelattribute-어노테이션으로-커맨드-객체-속성-이름-변경">4-3. @ModelAttribute 어노테이션으로 커맨드 객체 속성 이름 변경</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step3"</span><span class="o">)</span>
<span class="c1">// 뷰 코드에서는 "fromData"라는 이름으로 커맨드 객체에 접근 가능</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep3</span><span class="o">(</span><span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"formData"</span><span class="o">)</span> <span class="nc">RegisterRequest</span> <span class="n">regReq</span><span class="o">){</span>
      <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>커맨드 객체에 접근할 때 사용할 속성 이름을 <code class="highlighter-rouge">@ModelAttribute</code> 어노테이션을 사용해 변경<br />
<br /></li>
</ul>

<h4 id="4-4-커맨드-객체와-스프링-폼-연동">4-4. 커맨드 객체와 스프링 폼 연동</h4>
<ul>
  <li>회원 정보를 입력할 때 중복된 이메일을 입력하면 텅 빈 폼을 보여주는데, 비어있으므로 입력한 값을 <code class="highlighter-rouge">다시 입력</code>해야 하는 불편함이 발생</li>
  <li>다시 폼을 보여줄 때 <code class="highlighter-rouge">커맨드 객체</code>의 값을 폼에 채워주면 이런 불편함을 해소 가능</li>
  <li>스프링 MVC가 제공하는 <code class="highlighter-rouge">커스텀 태그</code>를 사용해 간단한 커맨드 객체의 값 출력 가능</li>
  <li>스프링은 <code class="highlighter-rouge">&lt;form:form&gt;</code> 태그와 <code class="highlighter-rouge">&lt;form:input&gt;</code> 태그를 제공
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">&lt;!-- step2.jsp --&gt;</span>

  <span class="nt">&lt;%@ taglib </span><span class="na">prefix=</span><span class="s">"form"</span><span class="na"> uri=</span><span class="s">"http://www.springframework.org/tags/form"</span> <span class="nt">%&gt;</span>
  ...
  <span class="nt">&lt;body&gt;</span>
      <span class="nt">&lt;h2&gt;</span>회원 정보 입력<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;form:form </span><span class="na">action=</span><span class="s">"step3"</span><span class="na"> modelAttribute=</span><span class="s">"registerRequest"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p&gt;</span>
          <span class="nt">&lt;label&gt;</span>이메일:<span class="nt">&lt;br&gt;</span>
          <span class="nt">&lt;form:input </span><span class="na">path=</span><span class="s">"email"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p&gt;</span>
          <span class="nt">&lt;label&gt;</span>이름:<span class="nt">&lt;br&gt;</span>
          <span class="nt">&lt;form:input </span><span class="na">path=</span><span class="s">"name"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p&gt;</span>
          <span class="nt">&lt;label&gt;</span>비밀번호:<span class="nt">&lt;br&gt;</span>
          <span class="nt">&lt;form:password </span><span class="na">path=</span><span class="s">"password"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
  ...
</code></pre></div>    </div>
  </li>
  <li>&lt;form:form&gt; 태그를 사용하려면 <code class="highlighter-rouge">커맨드 객체</code>가 존재해야 함</li>
  <li>따라서 다음과 같이 step2.jsp 뷰를 호출하는 컨트롤러 코드에 “registerRequest” <code class="highlighter-rouge">객체</code>를 <code class="highlighter-rouge">모델</code>에 넣어야 함
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// RegisterController.java</span>
  <span class="nd">@Controller</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">RegisterController</span> <span class="o">{</span>
      <span class="o">...</span>
      <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/register/step2"</span><span class="o">)</span>
      <span class="kd">public</span> <span class="nc">String</span> <span class="nf">handleStep2</span><span class="o">(</span>
              <span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"agree"</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"false"</span><span class="o">)</span> <span class="nc">Boolean</span> <span class="n">agree</span><span class="o">,</span>
              <span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(!</span><span class="n">agree</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">return</span> <span class="s">"register/step1"</span><span class="o">;</span>
          <span class="o">}</span>
                  <span class="c1">// 커스텀 태그 사용을 위해 커맨드 객체를 모델에 넣어줌</span>
          <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"registerRequest"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">RegisterRequest</span><span class="o">());</span>
          <span class="k">return</span> <span class="s">"register/step2"</span><span class="o">;</span>
      <span class="o">}</span>
          <span class="o">...</span>
  <span class="o">}</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h2 id="5-컨트롤러-구현-없는-매핑">5. 컨트롤러 구현 없는 매핑</h2>
<hr />
<p>step3.jsp에 존재하는 다음과 같은 코드는 가입 완료 후 첫 화면으로 복귀하는 역할</p>
<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;p&gt;&lt;a</span> <span class="na">herf=</span><span class="s">"c:url value='/main/'&gt;"</span><span class="nt">&gt;</span>[첫 화면 이동]<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
</code></pre></div></div>
<p>이 첫 화면이 단순히 환영 문구와 회원 가입으로 이동하는 링크를 제공한다면, 이를 위해 다음과 같은 <code class="highlighter-rouge">컨트롤러</code>를 구현해야 함</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Controller</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainController</span><span class="o">{</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/main"</span><span class="o">)</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">main</span><span class="o">(){</span>
                <span class="k">return</span> <span class="s">"main"</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>단순히 요청 경로와 뷰를 연결하기 위해 컨트롤러를 작성하는 <code class="highlighter-rouge">낭비</code> 발생</li>
  <li>WebMvcConfigurer 인터페이스의 <code class="highlighter-rouge">addViewControllers()</code> 매서드를 이용해 다음과 같이 보완 가능
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// MvcConfig.java</span>
  <span class="nd">@Configuration</span>
  <span class="nd">@EnableWebMvc</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MvcConfig</span> <span class="kd">implements</span> <span class="nc">WebMvcConfigurer</span> <span class="o">{</span>
      <span class="o">...</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addViewControllers</span><span class="o">(</span><span class="nc">ViewControllerRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">registry</span><span class="o">.</span><span class="na">addViewController</span><span class="o">(</span><span class="s">"/main"</span><span class="o">).</span><span class="na">setViewName</span><span class="o">(</span><span class="s">"main"</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h2 id="6-커맨드-객체-중첩-콜렉션-프로퍼티">6. 커맨드 객체: 중첩, 콜렉션 프로퍼티</h2>
<hr />
<p>스프링 MVC는 다음과 같은 경우에 <code class="highlighter-rouge">요청 파라미터</code>의 값을 알맞게 커맨드 객체에 전달</p>
<ol>
  <li>커맨드 객체가 <code class="highlighter-rouge">리스트</code> 타입의 프로퍼티를 가졌거나</li>
  <li><code class="highlighter-rouge">중첩</code> 프로퍼티를 가진 경우</li>
</ol>

<p>각 경우의 규칙은 다음과 같다.</p>
<ol>
  <li>HTTP 요청 파라미터 이름이 <code class="highlighter-rouge">"프로퍼티이름[인덱스]"</code> 형식이면 리스트를 처리</li>
  <li>HTTP 요청 파라미터 이름이 <code class="highlighter-rouge">"프로퍼티이름.프로퍼티이름"</code> 형식이면 중첩 프로퍼티를 처리</li>
</ol>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// AnsweredData.java</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">AnsweredData</span><span class="o">{</span>
        <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">responses</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">Respondent</span> <span class="n">res</span><span class="o">;</span>
        <span class="o">...</span>
    <span class="o">}</span>

    <span class="c1">// Respondent.java</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Respondent</span><span class="o">{</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">String</span> <span class="n">location</span><span class="o">;</span>
        <span class="o">...</span>
    <span class="o">}</span>
</code></pre></div></div>
<ul>
  <li>AsnweredData 객체는 <code class="highlighter-rouge">리스트</code> 타입의 프로퍼티 responses를 가짐</li>
  <li>AsnweredData 객체는 <code class="highlighter-rouge">중첩</code> 프로퍼티 res를 가짐</li>
</ul>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c">&lt;!-- surveyForm.jsp --&gt;</span>
    ...
    1. 당신의 역할은?<span class="nt">&lt;br/&gt;</span>
    <span class="nt">&lt;label&gt;&lt;input</span> <span class="na">type = </span><span class="s">"radio"</span> <span class="na">name = </span><span class="s">"response[0]"</span> <span class="na">value = </span><span class="s">"서버"</span><span class="nt">&gt;</span>
        서버개발자<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;label&gt;&lt;input</span> <span class="na">type = </span><span class="s">"radio"</span> <span class="na">name = </span><span class="s">"response[0]"</span> <span class="na">value = </span><span class="s">"프론트"</span><span class="nt">&gt;</span>
        프론트개발자<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;label&gt;&lt;input</span> <span class="na">type = </span><span class="s">"radio"</span> <span class="na">name = </span><span class="s">"response[0]"</span> <span class="na">value = </span><span class="s">"풀스택"</span><span class="nt">&gt;</span>
        풀스택개발자<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
    2. 가장 많이 사용하는 도구는?<span class="nt">&lt;br/&gt;</span>
    <span class="nt">&lt;label&gt;&lt;input</span> <span class="na">type = </span><span class="s">"radio"</span> <span class="na">name = </span><span class="s">"response[1]"</span> <span class="na">value = </span><span class="s">"Eclipse"</span><span class="nt">&gt;</span>
        Eclipse<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;label&gt;&lt;input</span> <span class="na">type = </span><span class="s">"radio"</span> <span class="na">name = </span><span class="s">"response[1]"</span> <span class="na">value = </span><span class="s">"Intellij"</span><span class="nt">&gt;</span>
        Intellij<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;label&gt;&lt;input</span> <span class="na">type = </span><span class="s">"radio"</span> <span class="na">name = </span><span class="s">"response[1]"</span> <span class="na">value = </span><span class="s">"Sublime"</span><span class="nt">&gt;</span>
        Sublime<span class="nt">&lt;/label&gt;</span>
    ...
    <span class="nt">&lt;label&gt;</span>응답자 위치:<span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"res.location"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/label&gt;</span>
    ...
</code></pre></div></div>
<p><br /></p>

<h2 id="7-model을-통해-컨트롤러에서-뷰에-데이터-전달">7. Model을 통해 컨트롤러에서 뷰에 데이터 전달</h2>
<hr />
<p>컨트롤러는 뷰가 <code class="highlighter-rouge">응답 화면</code>을 구성하는데 필요한 데이터를 생성해서 <code class="highlighter-rouge">Model</code>을 이용하여 전달하며 다음과 같은 두 가지를 수행</p>
<ol>
  <li>요청 매핑 어노테이션이 적용된 매서드의 파라미터로 <code class="highlighter-rouge">Model</code>을 추가</li>
  <li>Model 파라미터의 <code class="highlighter-rouge">addAttribute()</code> 매서드로 뷰에서 사용할 데이터 전달</li>
</ol>

<blockquote>
  <p>앞선 예제에서 JSP 파일에 설문 항목을 하드 코딩한 부분을 <code class="highlighter-rouge">컨트롤러</code>에서 생성해 뷰에 <code class="highlighter-rouge">전달</code>하는 방법으로 변경</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// SurveyController.java</span>
    <span class="nd">@Controller</span>
    <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/survey"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SurveyController</span> <span class="o">{</span>

        <span class="nd">@GetMapping</span>
            <span class="cm">/*
            * 1. 파라미터로 Model 타입을 추가
            * 2. addAttribute() 매서드로 전달
            */</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">form</span><span class="o">(</span><span class="nc">Model</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">questions</span> <span class="o">=</span> <span class="n">createQuestions</span><span class="o">();</span>
            <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">"questions"</span><span class="o">,</span> <span class="n">questions</span><span class="o">);</span>
            <span class="k">return</span> <span class="s">"survey/surveyForm"</span><span class="o">;</span>
        <span class="o">}</span>

            <span class="c1">// 설문항목</span>
        <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="nf">createQuestions</span><span class="o">()</span> <span class="o">{</span>
            <span class="nc">Question</span> <span class="n">q1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Question</span><span class="o">(</span><span class="s">"당신의 역할은 무엇입니까?"</span><span class="o">,</span>
                    <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"서버"</span><span class="o">,</span> <span class="s">"프론트"</span><span class="o">,</span> <span class="s">"풀스택"</span><span class="o">));</span>
            <span class="nc">Question</span> <span class="n">q2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Question</span><span class="o">(</span><span class="s">"많이 사용하는 개발도구는 무엇입니까?"</span><span class="o">,</span>
                    <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"이클립스"</span><span class="o">,</span> <span class="s">"인텔리J"</span><span class="o">,</span> <span class="s">"서브라임"</span><span class="o">));</span>
            <span class="nc">Question</span> <span class="n">q3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Question</span><span class="o">(</span><span class="s">"하고 싶은 말을 적어주세요."</span><span class="o">);</span>
            <span class="k">return</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">q1</span><span class="o">,</span> <span class="n">q2</span><span class="o">,</span> <span class="n">q3</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@PostMapping</span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">submit</span><span class="o">(</span><span class="nd">@ModelAttribute</span><span class="o">(</span><span class="s">"ansData"</span><span class="o">)</span> <span class="nc">AnsweredData</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">"survey/submitted"</span><span class="o">;</span>
        <span class="o">}</span>

    <span class="o">}</span>
</code></pre></div></div>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c">&lt;!-- surveyForm.jsp --&gt;</span>
    ...
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h2&gt;</span>설문조사<span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;c:forEach </span><span class="na">var=</span><span class="s">"q"</span><span class="na"> items=</span><span class="s">"</span><span class="si">${</span><span class="n">questions</span><span class="si">}</span><span class="s">"</span><span class="na"> varStatus=</span><span class="s">"status"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;p&gt;</span>
            ${status.index + 1}. ${q.title}<span class="nt">&lt;br/&gt;</span>
            <span class="nt">&lt;c:if </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">q</span><span class="o">.</span><span class="na">choice</span><span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;c:forEach </span><span class="na">var=</span><span class="s">"option"</span><span class="na"> items=</span><span class="s">"</span><span class="si">${</span><span class="n">q</span><span class="o">.</span><span class="na">options</span><span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label&gt;&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span> 
                            <span class="na">name=</span><span class="s">"responses[${status.index}]"</span> <span class="na">value=</span><span class="s">"${option}"</span><span class="nt">&gt;</span>
                    ${option}<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;/c:forEach&gt;</span>
            <span class="nt">&lt;/c:if&gt;</span>
            <span class="nt">&lt;c:if </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="o">!</span> <span class="n">q</span><span class="o">.</span><span class="na">choice</span> <span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"responses[${status.index}]"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/c:if&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/c:forEach&gt;</span>
    ...
</code></pre></div></div>
<p><br /></p>

<h4 id="7-1-modelandview를-통한-뷰-선택과-모델-전달">7-1. ModelAndView를 통한 뷰 선택과 모델 전달</h4>
<ul>
  <li>지금까지 구현한 컨트롤러는 다음과 같은 특징을 지님
    <ol>
      <li><code class="highlighter-rouge">Model</code>을 이용해 뷰에 전달할 데이터 설정</li>
      <li>결과를 보여줄 <code class="highlighter-rouge">뷰 이름</code>을 리턴</li>
    </ol>
  </li>
  <li><code class="highlighter-rouge">ModelAndView</code>를 사용하면 이 두 가지를 한번에 다음과 같이 처리 가능
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">// SurveyController.java  </span>
  <span class="nd">@Controller</span>
  <span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/survey"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SurveyController</span> <span class="o">{</span>

      <span class="cm">/*
          * 기존 코드
      @GetMapping
      public String form(Model model) {
          List&lt;Question&gt; questions = createQuestions();
          model.addAttribute("questions", questions);
          return "survey/surveyForm";
      }
          */</span>

      <span class="nd">@GetMapping</span>
      <span class="kd">public</span> <span class="nc">ModelAndiew</span> <span class="nf">form</span><span class="o">()</span> <span class="o">{</span>
          <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Question</span><span class="o">&gt;</span> <span class="n">questions</span> <span class="o">=</span> <span class="n">createQuestions</span><span class="o">();</span>
          <span class="n">mav</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">"questions"</span><span class="o">,</span> <span class="n">questions</span><span class="o">);</span>
          <span class="n">mav</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="s">"survey/surveyFrom"</span><span class="o">);</span>
          <span class="k">return</span> <span class="n">mav</span><span class="o">;</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h2 id="8-주요-폼-태그">8. 주요 폼 태그</h2>
<hr />
<p>스프링 MVC는 <code class="highlighter-rouge">&lt;form:form&gt;</code>, <code class="highlighter-rouge">&lt;form:input&gt;</code> 등 HTML 폼과 커맨드 객체를 연동하기 위한 JSP <code class="highlighter-rouge">태그 라이브러리</code>를 제공<br />
<br /></p>

<h4 id="8-1-form-태그를-위한-커스텀-태그--formform">8-1. &lt;form&gt; 태그를 위한 커스텀 태그 : &lt;form:form&gt;</h4>
<ul>
  <li><code class="highlighter-rouge">&lt;form&gt;</code> 커스텀 태그는 &lt;form&gt; 태그를 생성할 때 사용
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;form:form&gt;</span>
  ...
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"가입 완료"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/form:form&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>&lt;form:form&gt; 태그의 <code class="highlighter-rouge">method 속성</code>과 <code class="highlighter-rouge">action 속성</code>의 기본값은 각각 <code class="highlighter-rouge">post</code>와 <code class="highlighter-rouge">현재 요청 URL</code>
    <blockquote>
      <p>만약 요청 URL이 “/sp5-chap11/register/step2” 라면 앞선 태그는 다음의 &lt;form&gt; 태그를 생성
  ~~~jsp</p>
    </blockquote>
    <form id="command" action="/sp5-chap11/register/step2" method="post">
  ...
  &lt;/from&gt;
  ~~~  
</form>
  </li>
  <li>커맨드 객체의 이름이 기본값인 “command”가 아니라면 다음과 같이 <code class="highlighter-rouge">modelAttribute</code> 속성값으로 설정
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;form:form </span><span class="na">modelAttribute=</span><span class="s">"loginCommand"</span><span class="nt">&gt;</span>
  ...
  <span class="nt">&lt;/form&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>다음과 같이 커멘드 객체를 이용해 <code class="highlighter-rouge">이전에 입력한 값</code>을 출력 가능
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;form:from </span><span class="na">modelAttribute=</span><span class="s">"loginCommand"</span><span class="nt">&gt;</span>
  ...
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"id"</span> <span class="na">value=</span><span class="s">"${loginCoomand.id}"</span> <span class="nt">/&gt;</span>
  ...
  <span class="nt">&lt;/form:form&gt;</span>
</code></pre></div>    </div>
    <blockquote>
      <p>이때 input을 직접 사용하기 보다는 <code class="highlighter-rouge">&lt;form:input&gt;</code> 등의 태그를 사용하면 편리<br />
<br /></p>
    </blockquote>
  </li>
</ul>

<h4 id="8-2-input-관련-커스텀-태그-forminput-formpassword-formhidden">8-2. &lt;input&gt; 관련 커스텀 태그: &lt;form:input&gt;, &lt;form:password&gt;, &lt;form:hidden&gt;</h4>
<ul>
  <li>스프링은 다음과 같은 커스텀 태그를 제공
    <ul>
      <li><code class="highlighter-rouge">&lt;form:input&gt;</code>: text 타입 &lt;input&gt; 태그</li>
      <li><code class="highlighter-rouge">&lt;form:password&gt;</code>: passowrd 타입 &lt;input&gt; 태그</li>
      <li><code class="highlighter-rouge">&lt;form:hidden&gt;</code>: hidden 타입 &lt;input&gt; 태그</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">&lt;form:input&gt;</code> 커스텀 태그는 다음과 같이 <code class="highlighter-rouge">path</code> 속성을 사용해 연결할 커맨드 객체의 프로퍼티를 지정
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;form:form </span><span class="na">modelAttribute=</span><span class="s">"registerRequest"</span><span class="na"> action=</span><span class="s">step3"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>이메일:<span class="nt">&lt;br/&gt;</span>
      <span class="nt">&lt;form:input </span><span class="na">path=</span><span class="s">"email"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;/p&gt;</span>

  <span class="c">&lt;!-- 위 코드는 아래와 같이 HTML &lt;input&gt; 태그를 생성 --&gt;</span>

  <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"registerRequest"</span> <span class="na">action=</span><span class="s">step3"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>이메일:<span class="nt">&lt;br/&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"email"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h4 id="8-3-select-관련-커스텀-태그-formselect-formoptions-formoption">8-3. &lt;select&gt; 관련 커스텀 태그: &lt;form:select&gt;, &lt;form:options&gt;, &lt;form:option&gt;</h4>
<ul>
  <li>스프링은 다음과 같은 커스텀 태그를 제공
    <ul>
      <li><code class="highlighter-rouge">&lt;form:select&gt;</code>: &lt;select&gt; 태그를 생성, &lt;option&gt; 태그를 생성할 때 필요한 콜렉션을 전달 받을 수 있음</li>
      <li><code class="highlighter-rouge">&lt;form:password&gt;</code>: 지정한 콜렉션 객체를 이용하여 &lt;option&gt; 태그를 생성</li>
      <li><code class="highlighter-rouge">&lt;form:hidden&gt;</code>: &lt;option&gt; 태그를 한 개 생성</li>
    </ul>
  </li>
  <li>&lt;select&gt; 태그는 <code class="highlighter-rouge">선택</code> 옵션을 제공할 때 주로 사용</li>
  <li>&lt;select&gt; 태그에서 사용할 옵션 목록을 <code class="highlighter-rouge">Model</code>을 통해 전달하면 뷰에서 다음과 같이 간단하게 태그 생성 가능
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;form:form </span><span class="na">modelAttriute=</span><span class="s">"login"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"loginType"</span><span class="nt">&gt;</span>로그인 타입<span class="nt">&lt;/label&gt;</span>
      <span class="c">&lt;!-- loginTypes에는 모델에서 넘어온 로그인 타입 관련 array등이 저장됨 --&gt;</span>
      <span class="nt">&lt;form:select </span><span class="na">path=</span><span class="s">"loginType"</span><span class="na"> items=</span><span class="s">"</span><span class="si">${</span><span class="n">loginTypes</span><span class="si">}</span><span class="s">"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
  ...
  <span class="nt">&lt;/form:form&gt;</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h4 id="8-4-체크박스-관련-커스텀-태그-formcheckboxes-formcheckbox">8-4. 체크박스 관련 커스텀 태그: &lt;form:checkboxes&gt;, &lt;form:checkbox&gt;</h4>
<ul>
  <li><code class="highlighter-rouge">배열</code>이나 <code class="highlighter-rouge">List</code> 타입을 이용해 한 개 이상의 값을 커맨드 객체에 저장 후 HTML 폼에서는 <code class="highlighter-rouge">checkbox</code> 타입 태그 사용</li>
  <li>스프링은 다음과 같은 커스텀 태그를 제공
    <ul>
      <li><code class="highlighter-rouge">&lt;form:checkboxes&gt;</code>: 커맨드 객체의 특정 프로퍼티와 관련된 <code class="highlighter-rouge">checkbox 타입</code>의 &lt;input&gt; 태그 목록 생성</li>
      <li><code class="highlighter-rouge">&lt;form:checkbox&gt;</code>:  커맨드 객체의 특정 프로퍼티와 관련된 <code class="highlighter-rouge">한 개</code>의 checkbox 타입 &lt;input&gt; 태그 생성
        <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;p&gt;</span>
      <span class="c">&lt;!-- favoriteOsNames에 존재 하는 값들에 대한 체크박스를 생성 --&gt;</span>
      <span class="nt">&lt;label&gt;</span>선호 OS<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;form:checkboxes </span><span class="na">items=</span><span class="s">"</span><span class="si">${</span><span class="n">favoriteOsNames</span><span class="si">}</span><span class="s">"</span><span class="na"> paht = </span><span class="s">"favoriteOs"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
</code></pre></div>        </div>
        <p><br /></p>
      </li>
    </ul>
  </li>
</ul>

<h4 id="8-4-라디오버튼-관련-커스텀-태그-formradiobuttons-formradiobutton">8-4. 라디오버튼 관련 커스텀 태그: &lt;form:radiobuttons&gt;, &lt;form:radiobutton&gt;</h4>
<ul>
  <li>여러 옵션중 한 가지를 선택해야 하는 경우 <code class="highlighter-rouge">radio</code> 타입의 <code class="highlighter-rouge">&lt;input&gt;</code> 태그를 사용</li>
  <li>스프링은 다음과 같은 커스텀 태그를 제공
    <ul>
      <li><code class="highlighter-rouge">&lt;form:radiobuttons&gt;</code>: 커맨드 객체의 특정 프로퍼티와 관련된 <code class="highlighter-rouge">radio 타입</code>의 &lt;input&gt; 태그 목록 생성</li>
      <li><code class="highlighter-rouge">&lt;form:radiobutton&gt;</code>:  커맨드 객체의 특정 프로퍼티와 관련된 <code class="highlighter-rouge">한 개</code>의 radio 타입 &lt;input&gt; 태그 생성</li>
    </ul>
  </li>
  <li>다음과 같이 <code class="highlighter-rouge">items</code> 속성에 값으로 사용할 콜렉션을 전달받고 <code class="highlighter-rouge">path</code> 속성에 커맨드 객체의 프로퍼티를 지정
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label&gt;</span>주로 사용하는 개발툴<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;form:radiobuttons </span><span class="na">items=</span><span class="s">"</span><span class="si">${</span><span class="n">tools</span><span class="si">}</span><span class="s">"</span><span class="na"> path=</span><span class="s">"tool"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>
    <p><br /></p>
  </li>
</ul>

<h4 id="8-5-textarea-태그를-위한-커스텀-태그-formtextarea">8-5. &lt;textarea&gt; 태그를 위한 커스텀 태그: &lt;form:textarea&gt;</h4>
<ul>
  <li>게시글 내용과 같이 <code class="highlighter-rouge">여러 줄</code>을 입력받아야 하는 경우 사용</li>
  <li>스프링은 커맨드 객체와 관련된 &lt;textarea&gt;태그를 생성하는 <code class="highlighter-rouge">&lt;form:textarea&gt;</code> 커스텀 태그를 제공
    <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;p&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"etc"</span><span class="nt">&gt;</span>기타<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;form:textarea </span><span class="na">path=</span><span class="s">"etc"</span><span class="na"> cols=</span><span class="s">"20"</span><span class="na"> rows=</span><span class="s">"3"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>
  </li>
</ul>


        <hr>

        <div class="btn-movepage">

          
          <a href="/devlog/2019/12/30/spring-10.html" data-toggle="tooltip" data-placement="top" title="[Spring] 스프링 MVC 동작방식"> << Previous</a>
          <!-- <span class="d-none d-md-inline">Post</span> -->
          
          
          <a href="/devlog/2019/12/30/spring-12.html" data-toggle="tooltip" data-placement="top" title="[Spring] MVC2: 메세지, 커맨드 객체 검증">Next >></a>
          

        </div>

        
          <div id="post-disqus">
            <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = 'https://owin2828blog/devlog/2019/12/30/spring-11.html';
this.page.identifier = '/devlog/2019/12/30/spring-11';
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://owin2828blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
          </div>
        
      </div>
    </div>
  </div>






  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:owin2828@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/owin2828">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; owin2828 2020</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<!-- 이미지 및 캡션 -->
<script src="/assets/lib/jquery-1.12.0.min.js"></script>
<script src="/assets/lib/jquery.magnific-popup.min.js"></script>
<script src="/assets/js/index.js"></script>

<!-- 사이드바 메뉴 플로팅 -->
<script src="/assets/sidebar.js"></script>

<script src="/assets/scripts.js"></script>




</body>

</html>
